!function(){"use strict";class e{constructor(e,t,s,i,r){let{name:n,link:o,_id:a,isLiked:l}=e;this._name=n,this._link=o,this._id=a,this.isLiked=l,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=i,this._handleLikeClicks=r}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClicks(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}renderLikes(){this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}deleteCard(){this._cardElement.remove(),this._element=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this.renderLikes(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableSubmit():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}disableSubmit(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableValidation(e){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this._form,e)}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}};class s{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}class i{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}var r=class extends i{constructor(e,t){let{popupSelector:s}=e;super({popupSelector:s}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=[...this._popupElement.querySelectorAll(".modal__input")],this._submitBtn=this._popupElement.querySelector(".modal__button_submit"),this._submitBtnText=this._submitBtn.textContent}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()})),super.setEventListeners()}close(){super.close()}};const n={inputSelector:".modal__input",submitButtonSelector:".modal__button_submit",inactiveButtonClass:"modal__button_submit_disabled",inputErrorClass:"modal__input-error",errorClass:"modal__error_visible"},o=document.querySelector("#form-edit-profile"),a=document.querySelector("#form-add-card"),l=document.querySelector("#form-avatar"),d=document.querySelector("#profile-edit-button"),c=document.querySelector("#profile-add-button"),h=document.querySelector("#avatar-button"),u=document.querySelector("#profile-title-input"),_=document.querySelector("#profile-description-input");let m;document.querySelector("#modal-input-type-title"),document.querySelector("#modal-input-type-url"),document.querySelector("#modal-input-type-avatar"),document.querySelector("#delete-card-button");const p=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleRes(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getCurrentUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleRes)}updateProfileInfo(e){let{title:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleRes)}updateAvatar(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._handleRes)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleRes)}createACard(e){let{title:t,url:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleRes)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleRes)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers,body:JSON.stringify({isLiked:!0})}).then(this._handleRes)}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers,body:JSON.stringify({isLiked:!1})}).then(this._handleRes)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"77570098-8218-4305-94d2-93e61885b891","Content-Type":"application/json"}}),v=new class extends i{constructor(e){super(e),this._previewImage=this._popupElement.querySelector(".modal__image"),this._previewTitle=this._popupElement.querySelector(".modal__card_title")}open(e){this._previewImage.src=e.link,this._previewImage.alt=e.name,this._previewTitle.textContent=e.name,super.open()}close(){super.close()}}({popupSelector:"#preview-card-image-modal"});v.setEventListeners();const b=new r({popupSelector:"#add-card-modal"},(function(e){b.renderLoading(!0),p.createACard(e).then((e=>{C(e),b.close(),a.resetValidation(),q.disableSubmit()})).catch((e=>{console.log(e)})).finally((()=>{b.renderLoading(!1)}))}));b.setEventListeners();const E=new r({popupSelector:"#profile-edit-button-modal"},(function(e){E.renderLoading(!0),p.updateProfileInfo(e).then((e=>{L.setUserInfo(e),E.close(),o.resetValidation(),I.disableSubmit()})).catch((e=>{console.log(e)})).finally((()=>{E.renderLoading(!1)}))}));E.setEventListeners();const S=new class extends i{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form")}handleDelete(e){this._handleDeleteSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteSubmit()}))}}("#confirm-delete-modal");S.setEventListeners();const f=new r({popupSelector:"#change-avatar-modal"},(function(e){f.renderLoading(!0),p.updateAvatar(e).then((e=>{L.setAvatarInfo(e),f.close(),B.disableSubmit()})).catch((e=>{console.log(e)})).finally((()=>{f.renderLoading(!1)})),console.log(e)}));f.setEventListeners();const L=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:i}=e;this._name=document.querySelector(t),this._job=document.querySelector(s),this._avatar=document.querySelector(i)}getUserInfo(){return{name:this._name.textContent,about:this._job.textContent}}setUserInfo(e){this._name.textContent=e.name,this._job.textContent=e.about}setAvatarInfo(e){this._avatar.src=e.avatar}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:".profile__image"});function y(e){v.open(e)}function k(e){e.isLiked&&p.dislikeCard(e._id).then((t=>{e.isLiked=t.isLiked,e.renderLikes()})).catch((e=>{console.log(e)})),e.isLiked||p.likeCard(e._id).then((t=>{e.isLiked=t.isLiked,e.renderLikes()})).catch((e=>{console.log(e)}))}function g(e){S.open(),console.log(e._id),S.handleDelete((()=>{p.deleteCard(e._id).then((()=>{e.deleteCard(),S.close()})).catch((e=>{console.error(e)}))}))}function C(t){const s=new e(t,"#card-template",y,g,k).getView();m.addItem(s)}p.getCurrentUserInfo().then((e=>{L.setAvatarInfo(e),L.setUserInfo({name:e.name,about:e.about})})).catch((e=>{console.log(e)})),p.getInitialCards().then((e=>{m=new s({items:e,renderer:C},".cards__list"),m.renderItems(e)})).catch((e=>{console.log(e)})),d.addEventListener("click",(()=>{I.resetValidation();const e=L.getUserInfo();u.value=e.name,_.value=e.about,E.open()})),c.addEventListener("click",(()=>{q.resetValidation(),b.open()})),h.addEventListener("click",(()=>{f.open()}));const I=new t(n,o),q=new t(n,a),B=new t(n,l);I.enableValidation(),q.enableValidation(),B.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkcsaUJBQWlCLFNBQVMsS0FDaERzSixFQUFpQmhHLGtCQUNqQjRGLEVBQWExRSxNQUFNLElBR3JCZ0MsRUFBYXhHLGlCQUFpQixTQUFTLEtBQ3JDb0ssRUFBWTVGLE1BQU0sSUFLcEIsTUFBTXVGLEVBQW9CLElBQUlvQixFQUM1QmpGLEVBQ0FDLEdBRUltRCxFQUFtQixJQUFJNkIsRUFBY2pGLEVBQW9CRSxHQUN6RGtFLEVBQXNCLElBQUlhLEVBQzlCakYsRUFDQUcsR0FHRjBELEVBQWtCNUcsbUJBQ2xCbUcsRUFBaUJuRyxtQkFDakJtSCxFQUFvQm5ILGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BUEkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtRGVsZXRlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGlja3NcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgdGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2tzID0gaGFuZGxlTGlrZUNsaWNrcztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2tzKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7XG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckxpa2VzKCkge1xuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG5cbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5yZW5kZXJMaWtlcygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdCgpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbihvcHRpb25zKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2Zvcm0sIG9wdGlvbnMpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3ByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXJkX3RpdGxlXCIpO1xuICB9XG5cbiAgLy8gRmlndXJlIHRoaXMgb3V0XG4gIG9wZW4oY2FyZERhdGEpIHtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9wcmV2aWV3VGl0bGUudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuXG4gICAgc3VwZXIub3BlbigpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXTtcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uX3N1Ym1pdFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdG5UZXh0ID0gdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50O1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGxvYWRpbmdUZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCIpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dENvbnRlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ0blRleHQ7XG4gICAgfVxuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZSA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZm9ybVZhbHVlO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvbl9zdWJtaXRcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX3N1Ym1pdF9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm0tZWRpdC1wcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IGFkZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWFkZC1jYXJkXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWF2YXRhclwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1hZGQtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItYnV0dG9uXCIpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5leHBvcnQgY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWlucHV0LXR5cGUtdGl0bGVcIik7XG5leHBvcnQgY29uc3QgY2FyZExpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtaW5wdXQtdHlwZS11cmxcIik7XG5leHBvcnQgY29uc3QgYXZhdGFySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWlucHV0LXR5cGUtYXZhdGFyXCIpO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1jYXJkLWJ1dHRvblwiKTtcbiIsImltcG9ydCBcIi4uL2ltYWdlcy9qYWNxdWVzLWNvdXN0ZWF1LmpwZ1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBDb25maXJtRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybURlbGV0ZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FQSS5qc1wiO1xuaW1wb3J0IHtcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlQWRkTmV3Q2FyZEJ1dHRvbixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIGFkZEZvcm1FbGVtZW50LFxuICBlZGl0Rm9ybUVsZW1lbnQsXG4gIGF2YXRhckZvcm1FbGVtZW50LFxuICBhdmF0YXJCdXR0b24sXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxuICBwcm9maWxlVGl0bGVJbnB1dCxcbiAgZGVsZXRlQ2FyZEJ1dHRvbixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFwiLi8vaW5kZXguY3NzXCI7XG5cbmxldCBzZWN0aW9uO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI3NzU3MDA5OC04MjE4LTQzMDUtOTRkMi05M2U2MTg4NWI4OTFcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI3ByZXZpZXctY2FyZC1pbWFnZS1tb2RhbFwiLFxufSk7XG5wcmV2aWV3SW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAge1xuICAgIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIH0sXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xuYWRkQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAge1xuICAgIHBvcHVwU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZWRpdC1idXR0b24tbW9kYWxcIixcbiAgfSxcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcbik7XG5wcm9maWxlRWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGRlbGV0ZUltYWdlTW9kYWwgPSBuZXcgUG9wdXBDb25maXJtRGVsZXRlKFwiI2NvbmZpcm0tZGVsZXRlLW1vZGFsXCIpO1xuZGVsZXRlSW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICB7XG4gICAgcG9wdXBTZWxlY3RvcjogXCIjY2hhbmdlLWF2YXRhci1tb2RhbFwiLFxuICB9LFxuICBoYW5kbGVDaGFuZ2VBdmF0YXJcbik7XG5hdmF0YXJNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxufSk7XG5cbmFwaVxuICAuZ2V0Q3VycmVudFVzZXJJbmZvKClcbiAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0QXZhdGFySW5mbyh1c2VyRGF0YSk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgIGFib3V0OiB1c2VyRGF0YS5hYm91dCxcbiAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuYXBpXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxuICAudGhlbigoY2FyZHMpID0+IHtcbiAgICBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gICAgICB9LFxuICAgICAgXCIuY2FyZHNfX2xpc3RcIlxuICAgICk7XG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIHByb2ZpbGVFZGl0TW9kYWwucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpXG4gICAgLnVwZGF0ZVByb2ZpbGVJbmZvKGlucHV0VmFsdWVzKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XG4gICAgICBwcm9maWxlRWRpdE1vZGFsLmNsb3NlKCk7XG4gICAgICBlZGl0Rm9ybUVsZW1lbnQucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgICBlZGl0Rm9ybVZhbGlkYXRvci5kaXNhYmxlU3VibWl0KCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHByb2ZpbGVFZGl0TW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGFkZENhcmRNb2RhbC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAuY3JlYXRlQUNhcmQoaW5wdXRWYWx1ZXMpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmVuZGVyQ2FyZChyZXMpO1xuICAgICAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XG4gICAgICBhZGRGb3JtRWxlbWVudC5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgIGFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZVN1Ym1pdCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkTW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNoYW5nZUF2YXRhcihpbnB1dFZhbHVlcykge1xuICBhdmF0YXJNb2RhbC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAudXBkYXRlQXZhdGFyKGlucHV0VmFsdWVzKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldEF2YXRhckluZm8ocmVzKTtcbiAgICAgIGF2YXRhck1vZGFsLmNsb3NlKCk7XG4gICAgICBhdmF0YXJGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgYXZhdGFyTW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG4gIGNvbnNvbGUubG9nKGlucHV0VmFsdWVzKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xuICBwcmV2aWV3SW1hZ2VNb2RhbC5vcGVuKGNhcmREYXRhKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrcyhjYXJkKSB7XG4gIGlmIChjYXJkLmlzTGlrZWQpIHtcbiAgICBhcGlcbiAgICAgIC5kaXNsaWtlQ2FyZChjYXJkLl9pZClcbiAgICAgIC50aGVuKChuZXdDYXJkRGF0YSkgPT4ge1xuICAgICAgICBjYXJkLmlzTGlrZWQgPSBuZXdDYXJkRGF0YS5pc0xpa2VkO1xuICAgICAgICBjYXJkLnJlbmRlckxpa2VzKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG4gIGlmICghY2FyZC5pc0xpa2VkKSB7XG4gICAgYXBpXG4gICAgICAubGlrZUNhcmQoY2FyZC5faWQpXG4gICAgICAudGhlbigobmV3Q2FyZERhdGEpID0+IHtcbiAgICAgICAgY2FyZC5pc0xpa2VkID0gbmV3Q2FyZERhdGEuaXNMaWtlZDtcbiAgICAgICAgY2FyZC5yZW5kZXJMaWtlcygpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVTdWJtaXQoY2FyZCkge1xuICBkZWxldGVJbWFnZU1vZGFsLm9wZW4oKTtcbiAgY29uc29sZS5sb2coY2FyZC5faWQpO1xuICBkZWxldGVJbWFnZU1vZGFsLmhhbmRsZURlbGV0ZSgoKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLl9pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgIGRlbGV0ZUltYWdlTW9kYWwuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGRhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlU3VibWl0LFxuICAgIGhhbmRsZUxpa2VDbGlja3NcbiAgKTtcbiAgY29uc3QgY2FyZEVsID0gY2FyZC5nZXRWaWV3KCk7XG4gIHJldHVybiBjYXJkRWw7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUFDYXJkKGNhcmREYXRhKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xufVxuXG4vLyBFdmVudCBMaXN0ZW5lcnNcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmFib3V0O1xuICBwcm9maWxlRWRpdE1vZGFsLm9wZW4oKTtcbn0pO1xuXG5wcm9maWxlQWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhZGRDYXJkTW9kYWwub3BlbigpO1xufSk7XG5cbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhdmF0YXJNb2RhbC5vcGVuKCk7XG59KTtcblxuLy8gRm9ybSBWYWxpZGF0b3JzXG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgZWRpdEZvcm1FbGVtZW50XG4pO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkRm9ybUVsZW1lbnQpO1xuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXG4gIGF2YXRhckZvcm1FbGVtZW50XG4pO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9oYW5kbGVSZXMocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0Q3VycmVudFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXMpO1xuICB9XG5cbiAgLy8gRXJyb3JcbiAgdXBkYXRlUHJvZmlsZUluZm8oeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogdGl0bGUsXG4gICAgICAgIGFib3V0OiBkZXNjcmlwdGlvbixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzKTtcbiAgfVxuICAvLyBQYXRjaCBhbmQgdXBkYXRlIGF2YXRhclxuICB1cGRhdGVBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXMpO1xuICB9XG4gIC8vIEdFVCBDYXJkc1xuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlcyk7XG4gIH1cbiAgLy8gUG9zdCBjYXJkc1xuICBjcmVhdGVBQ2FyZCh7IHRpdGxlLCB1cmwgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiB0aXRsZSxcbiAgICAgICAgbGluazogdXJsLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXMpO1xuICB9XG4gIC8vIERFTEVURSBjYXJkXG4gIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzKTtcbiAgfVxuICAvLyBQVVQgb3IgbGlrZSBhIGNhcmRcbiAgbGlrZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpc0xpa2VkOiB0cnVlLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXMpO1xuICB9XG4gIC8vIERpc2xpa2UgYW5kIERlbGV0ZVxuICBkaXNsaWtlQ2FyZChpZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlzTGlrZWQ6IGZhbHNlLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXMpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlKGhhbmRsZURlbGV0ZVN1Ym1pdCkge1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZVN1Ym1pdCA9IGhhbmRsZURlbGV0ZVN1Ym1pdDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlU3VibWl0KCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2pvYi50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8odXNlckRhdGEpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcbiAgfVxuXG4gIHNldEF2YXRhckluZm8odXNlckRhdGEpIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGlja3MiLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2tzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJyZW5kZXJMaWtlcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImRlbGV0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJfZWxlbWVudCIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZSIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0Iiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJkaXNhYmxlU3VibWl0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZXZ0IiwiZW5hYmxlVmFsaWRhdGlvbiIsIm9wdGlvbnMiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfc3VibWl0QnRuIiwiX3N1Ym1pdEJ0blRleHQiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHRDb250ZW50IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlIiwiaW5wdXQiLCJ2YWx1ZSIsImUiLCJyZXNldCIsInZhbGlkYXRpb25TZXR0aW5ncyIsImVkaXRGb3JtRWxlbWVudCIsImFkZEZvcm1FbGVtZW50IiwiYXZhdGFyRm9ybUVsZW1lbnQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGROZXdDYXJkQnV0dG9uIiwiYXZhdGFyQnV0dG9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInNlY3Rpb24iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfaGFuZGxlUmVzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEN1cnJlbnRVc2VySW5mbyIsImZldGNoIiwidGhlbiIsInVwZGF0ZVByb2ZpbGVJbmZvIiwiX3JlZjIiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsInVwZGF0ZUF2YXRhciIsIl9yZWYzIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiY3JlYXRlQUNhcmQiLCJfcmVmNCIsInVybCIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJhdXRob3JpemF0aW9uIiwicHJldmlld0ltYWdlTW9kYWwiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdUaXRsZSIsImNhcmREYXRhIiwiYWRkQ2FyZE1vZGFsIiwiUG9wdXBXaXRoRm9ybSIsImlucHV0VmFsdWVzIiwicmVuZGVyQ2FyZCIsImFkZEZvcm1WYWxpZGF0b3IiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwicHJvZmlsZUVkaXRNb2RhbCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJlZGl0Rm9ybVZhbGlkYXRvciIsImRlbGV0ZUltYWdlTW9kYWwiLCJoYW5kbGVEZWxldGUiLCJoYW5kbGVEZWxldGVTdWJtaXQiLCJfaGFuZGxlRGVsZXRlU3VibWl0IiwiYXZhdGFyTW9kYWwiLCJzZXRBdmF0YXJJbmZvIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfam9iIiwiX2F2YXRhciIsImdldFVzZXJJbmZvIiwidXNlckRhdGEiLCJjYXJkIiwibmV3Q2FyZERhdGEiLCJlcnJvciIsImNhcmRzIiwiY3VycmVudFVzZXJJbmZvIiwiRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=