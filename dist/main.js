!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:i}=e;this._data={name:n,link:i},this._name=n,this._link=i,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon(this)})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._element=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle.textContent=this._data.name,this._cardImage.src=this._data.link,this._cardImage.alt=this._data.link,this._setEventListeners(),this._cardElement}}var t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(e){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(this._form,e)}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}};class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}var n=class extends s{constructor(e,t){let{popupSelector:s}=e;super({popupSelector:s}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=[...this._popupElement.querySelectorAll(".modal__input")]}_getInputValues(){return this._formValue={},this._inputList.forEach((e=>{this._formValue[e.name]=e.value})),this._formValue}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._formValues=this._getInputValues(),this._handleFormSubmit(this._formValues),this._popupForm.reset()})),super.setEventListeners()}close(){super.close()}};const i={inputSelector:".modal__input",submitButtonSelector:".modal__button_submit",inactiveButtonClass:"modal__button_submit_disabled",inputErrorClass:"modal__input-error",errorClass:"modal__error_visible"},r=document.querySelector("#form-edit-profile"),o=document.querySelector("#form-add-card"),a=document.querySelector("#profile-title-input"),l=document.querySelector("#profile-description-input"),c=document.querySelector("#profile-edit-button"),u=document.querySelector("#profile-add-button"),d=new class{constructor(e,t){let{items:s,renderer:n}=e;this._data=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._data.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:t=>{const s=function(t){return new e(t,"#card-template",m).getView(t)}(t);d.addItem(s)}},".cards__list");d.renderItems();const _=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._name=document.querySelector(t),this._job=document.querySelector(s)}getUserInfo(){const e={};return e.name=this._name.textContent,e.description=this._job.textContent,e}setUserInfo(e){this._name.textContent=e.name,this._job.textContent=e.description}}({nameSelector:".profile__title",jobSelector:".profile__description"});function m(e){p.open(e)}const p=new class extends s{constructor(e){super(e),this._previewImage=this._popupElement.querySelector(".modal__image"),this._previewTitle=this._popupElement.querySelector(".modal__card_title")}open(e){this._previewImage.src=e.link,this._previewImage.alt=e.name,this._previewTitle.textContent=e.name,super.open()}close(){super.close()}}({popupSelector:"#preview-card-image-modal"});p.setEventListeners();const h=new n({popupSelector:"#add-card-modal"},(function(e){d._renderer(e),S._toggleButtonState(e),h.close()}));h.setEventListeners();const E=new n({popupSelector:"#profile-edit-button-modal"},(function(e){_.setUserInfo(e),v._toggleButtonState(e),E.close()}));E.setEventListeners();const v=new t(i,r),S=new t(i,o);v.enableValidation(),S.enableValidation(),c.addEventListener("click",(()=>{v.resetValidation();const e=_.getUserInfo();a.value=e.name,l.value=e.description,E.open()})),u.addEventListener("click",(()=>{S.resetValidation(),h.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUIsU0FBUyxLQUMxQ2tILEVBQWtCL0Qsa0JBQ2xCLE1BQU1pRSxFQUFrQm5CLEVBQVNJLGNBQ2pDdEIsRUFBa0JQLE1BQVE0QyxFQUFnQi9ILEtBQzFDMkYsRUFBd0JSLE1BQVE0QyxFQUFnQmIsWUFDaERVLEVBQWlCeEQsTUFBTSxJQUd6QnlCLEVBQXdCbEYsaUJBQWlCLFNBQVMsS0FDaERnSCxFQUFpQjdELGtCQUNqQjBELEVBQWFwRCxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fZGF0YSA9IHsgbmFtZSwgbGluayB9O1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBEb3VibGUgY2hlY2sgdGhhdCB0aGVzZSBhcmUgdGhlIHNhbWVcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbih0aGlzKTtcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9kYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLm5hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2RhdGEubGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fZGF0YS5saW5rO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbihvcHRpb25zKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2Zvcm0sIG9wdGlvbnMpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIC8vIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIF9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3ByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXJkX3RpdGxlXCIpO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5fcHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0sIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKV07XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWU7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2Zvcm1WYWx1ZXMpO1xuICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgfSk7XG5cbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25fc3VibWl0XCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9zdWJtaXRfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuIiwiaW1wb3J0IFwiLi8vaW5kZXguY3NzXCI7XG5pbXBvcnQgXCIuLi9pbWFnZXMvamFjcXVlcy1jb3VzdGVhdS5qcGdcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLy8gQ2FyZCBjbGFzcyBjb25zdGFudHNcbi8vIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbi8vIGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbi8vIGNhcmRUZW1wbGF0ZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbi8vIGNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWNhcmQtaW1hZ2UtbW9kYWxcIik7XG4vLyBjb25zdCBhZGRDYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuLy8gY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvbi1tb2RhbFwiKTtcblxuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWVkaXQtcHJvZmlsZVwiKTtcbmNvbnN0IGFkZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtLWFkZC1jYXJkXCIpO1xuXG4vLyBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuLy8gY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVBZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgY29uc3QgY2FyZEVsID0gY2FyZC5nZXRWaWV3KGRhdGEpO1xuICByZXR1cm4gY2FyZEVsO1xufVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhkYXRhKSB7XG4gIHByZXZpZXdJbWFnZU1vZGFsLm9wZW4oZGF0YSk7XG59XG5cbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJldmlldy1jYXJkLWltYWdlLW1vZGFsXCIsXG59KTtcbnByZXZpZXdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICB7XG4gICAgcG9wdXBTZWxlY3RvcjogXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgfSxcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcbik7XG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICB7XG4gICAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZS1lZGl0LWJ1dHRvbi1tb2RhbFwiLFxuICB9LFxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxuKTtcbnByb2ZpbGVFZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xuICBlZGl0Rm9ybVZhbGlkYXRvci5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRWYWx1ZXMpO1xuICBwcm9maWxlRWRpdE1vZGFsLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIHNlY3Rpb24uX3JlbmRlcmVyKGlucHV0VmFsdWVzKTtcbiAgYWRkRm9ybVZhbGlkYXRvci5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRWYWx1ZXMpO1xuICBhZGRDYXJkTW9kYWwuY2xvc2UoKTtcbn1cblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBlZGl0Rm9ybUVsZW1lbnRcbik7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRGb3JtRWxlbWVudCk7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uZGVzY3JpcHRpb247XG4gIHByb2ZpbGVFZGl0TW9kYWwub3BlbigpO1xufSk7XG5cbnByb2ZpbGVBZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGFkZENhcmRNb2RhbC5vcGVuKCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2RhdGEgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fZGF0YS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJzQ3VycmVudEluZm8gPSB7fTtcbiAgICB1c2Vyc0N1cnJlbnRJbmZvLm5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xuICAgIHVzZXJzQ3VycmVudEluZm8uZGVzY3JpcHRpb24gPSB0aGlzLl9qb2IudGV4dENvbnRlbnQ7XG4gICAgcmV0dXJuIHVzZXJzQ3VycmVudEluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmRlc2NyaXB0aW9uO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfZGF0YSIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsIl9lbGVtZW50IiwiZ2V0VmlldyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0RWxzIiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZXZ0IiwiZW5hYmxlVmFsaWRhdGlvbiIsIm9wdGlvbnMiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZSIsImlucHV0IiwidmFsdWUiLCJlIiwiX2Zvcm1WYWx1ZXMiLCJyZXNldCIsInZhbGlkYXRpb25TZXR0aW5ncyIsImVkaXRGb3JtRWxlbWVudCIsImFkZEZvcm1FbGVtZW50IiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUFkZE5ld0NhcmRCdXR0b24iLCJzZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX2pvYiIsImdldFVzZXJJbmZvIiwidXNlcnNDdXJyZW50SW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJ1c2VyRGF0YSIsInByZXZpZXdJbWFnZU1vZGFsIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3VGl0bGUiLCJhZGRDYXJkTW9kYWwiLCJQb3B1cFdpdGhGb3JtIiwiaW5wdXRWYWx1ZXMiLCJhZGRGb3JtVmFsaWRhdG9yIiwicHJvZmlsZUVkaXRNb2RhbCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImN1cnJlbnRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=